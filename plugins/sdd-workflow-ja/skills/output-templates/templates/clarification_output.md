## 仕様明確化レポート

### 対象ドキュメント

- `.sdd/specification/[{親機能名}/]{機能名}_spec.md`

※ 階層構造の場合、親機能は `index_spec.md`

### 明確度スコア

| カテゴリ   | Clear  | Partial | Missing | スコア     |
|:-------|:-------|:--------|:--------|:--------|
| 機能範囲   | 3      | 1       | 0       | 75%     |
| データモデル | 2      | 2       | 1       | 60%     |
| フロー    | 4      | 0       | 0       | 100%    |
| 非機能要件  | 0      | 2       | 2       | 25%     |
| 統合     | 1      | 0       | 1       | 50%     |
| エッジケース | 1      | 2       | 1       | 50%     |
| 制約     | 2      | 0       | 0       | 100%    |
| 用語     | 3      | 1       | 0       | 75%     |
| 完了条件   | 0      | 1       | 2       | 17%     |
| **総合** | **16** | **9**   | **7**   | **61%** |

### 🔴 Missing（未定義）項目

#### カテゴリ: データモデル

**項目**: ユーザーセッションの有効期限

**現在の記載**: 記載なし

**影響**: セッション管理の実装方針が不明確

---

#### カテゴリ: 非機能要件

**項目**: 同時ログイン数の想定

**現在の記載**: 記載なし

**影響**: パフォーマンステストの基準が定義できない

---

### 🟡 Partial（部分的）項目

#### カテゴリ: エッジケース

**項目**: ネットワークエラー時の振る舞い

**現在の記載**: 「エラーを返す」

**不明点**: リトライ戦略、タイムアウト値、ユーザーへの通知方法が不明

---

### 優先質問（最大5つ）

#### Q1. [高優先度] セッション管理の詳細仕様

**カテゴリ**: データモデル、フロー

**質問**:

- ユーザーセッションの有効期限はどうするか？（例: 30分、1日）
- セッション延長の仕様は？（アクティビティベース or 固定）
- 複数デバイスからの同時ログインは許可するか？

**影響**: 認証フロー全体の実装に影響

**推奨回答形式**:

```
- 有効期限: {時間}
- 延長: {アクティビティベース or 固定 or なし}
- 同時ログイン: {許可 or 禁止}
```

---

#### Q2. [高優先度] パフォーマンス目標の定義

**カテゴリ**: 非機能要件

**質問**:

- 同時ログイン数の想定は？（例: 100, 1000, 10000）
- レスポンスタイムの目標は？（例: 95%ile < 200ms）
- スケーラビリティの要求は？（水平スケール対応の必要性）

**影響**: アーキテクチャ設計、技術選定

**推奨回答形式**:

```
- 同時ログイン数: {数値}
- レスポンスタイム: 95%ile < {ミリ秒}ms
- スケーラビリティ: {必要 or 不要}
```

---

#### Q3. [中優先度] エラーハンドリング戦略

**カテゴリ**: フロー、エッジケース

**質問**:

- ネットワークエラー時のリトライ戦略は？（回数、間隔）
- タイムアウト値の設定は？
- ユーザーへのエラー通知はどうするか？

**影響**: ユーザー体験、システムの堅牢性

**推奨回答形式**:

```
- リトライ: {回数}回、{間隔}秒間隔
- タイムアウト: {秒}秒
- 通知: {トースト or ダイアログ or ログのみ}
```

---

### 回答の統合先

回答は `.sdd/specification/[{親機能名}/]{機能名}_spec.md` に以下のセクションに統合します：

- データモデル関連 → `## データモデル` セクション
- フロー関連 → `## 振る舞い` セクション
- 非機能要件 → `## 非機能要件` セクション（新規追加）
- 用語定義 → `## 用語集` セクション

### 次のアクション

1. **質問に回答**: 上記の質問に回答してください
2. **仕様書を更新**: 回答を元に仕様書を更新します
3. **再スキャン**: `/clarify {機能名}` を再実行して明確度を確認
4. **目標**: 総合スコア 80% 以上で実装開始を推奨
